import{h as i,$ as s,G as t,N as d,o as a,c as e,w as l,a as p,d as n,t as u,m as h,I as r,f as w,i as o,M as c}from"./index.ca9f02a4.js";import{_ as m}from"./plugin-vue_export-helper.21dcd24c.js";var T=m({data:()=>({idTips:"",pwdTips:"",id:"",pwd:"",pwdAgain:"",exist:!1,data:{},state:3}),methods:{signin(a){i({url:"/AnonymousForum/GET/UserInfo.php",data:a,method:"POST",success:i=>{switch(this.state=i.data.state,this.state){case 0:this.$store.commit("setUid",i.data.uid),s("loadData"),t({title:"登陆成功",content:"uid:"+i.data.uid+"\n点击确定跳转主页",showCancel:!1,success:function(i){i.confirm&&d({url:"../index/index"})}});break;case 1:this.pwdTips="密码错误";break;case 2:this.exist=!0;break;case 3:this.idTips="账号不存在,请注册",this.exist=!1}}})},idBlur(i){""!=i.detail.value&&(this.id=i.detail.value,/[\w]+(\.[\w]+)*@[\w]+(\.[\w])+/.test(this.id)?(this.idTips="",this.signin('{"email":"'+this.id+'"}')):/[^0-9]/.test(this.id)?this.idTips="格式错误":(this.idTips="",this.signin('{"id":"'+this.id+'"}')))},pwdBlur(i){""!=i.detail.value&&(this.pwd=i.detail.value,/^\w+$/.test(this.pwd)?this.pwdTips="":this.pwdTips="格式错误")},pwdAgainBlur(i){""!=i.detail.value&&(this.pwdAgain=i.detail.value,this.pwd===this.pwdAgain?this.pwdTips="":this.pwdTips="两次密码不一致")},btnClick(){""!=this.id?""!=this.pwd?/^\w+$/.test(this.pwd)&&(/[\w]+(\.[\w]+)*@[\w]+(\.[\w])+/.test(this.id)?this.exist?this.signin('{"email":"'+this.id+'", "pwd":"'+this.pwd+'"}'):this.pwd==this.pwdAgain&&i({url:"/AnonymousForum/SET/regist.php",data:'{"email":"'+this.id+'", "pwd":"'+this.pwd+'" }',method:"POST",success:i=>{this.$store.commit("setUid",i.data.uid),t({title:"注册成功",content:"uid:"+i.data.uid+"\n点击确定跳转主页",showCancel:!1,success:function(i){i.confirm&&d({url:"../index/index"})}})}}):/[^0-9]/.test(this.id)||(this.exist?this.signin('{"id":"'+this.id+'", "pwd":"'+this.pwd+'" }'):this.idTips="id不存在,如需注册请输入邮箱")):this.pwdTips="请输入密码":this.idTips="请输入帐号"}},computed:{}},[["render",function(i,s,t,d,m,T){const f=r,x=w,g=o,_=c;return a(),e(g,null,{default:l((()=>[p(g,null,{default:l((()=>[p(g,null,{default:l((()=>[n(" 帐号:"),p(f,{id:"idInput",type:"text",placeholder:"邮箱或uid,注册时请输入邮箱",maxlength:"32",onBlur:T.idBlur},null,8,["onBlur"]),p(x,{class:"tips"},{default:l((()=>[n(u(m.idTips),1)])),_:1})])),_:1}),p(g,null,{default:l((()=>[n(" 密码:"),p(f,{class:"pwsInput",type:"text",placeholder:"最长32位,由大小写字母,数字,_组成",password:"true",maxlength:"32",onBlur:T.pwdBlur},null,8,["onBlur"]),p(x,{class:"tips"},{default:l((()=>[n(u(m.pwdTips),1)])),_:1})])),_:1}),m.exist?h("",!0):(a(),e(g,{key:0},{default:l((()=>[n(" 确认密码:"),p(f,{class:"pwsInput",type:"text",placeholder:"最长32位,由大小写字母,数字,_符号组成",password:"true",maxlength:"32",onBlur:T.pwdAgainBlur},null,8,["onBlur"]),p(x,{class:"tips"},{default:l((()=>[n(u(m.pwdTips),1)])),_:1})])),_:1})),p(_,{type:"primary",onClick:T.btnClick},{default:l((()=>[n("登录/注册")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-5742a36e"]]);export{T as default};
