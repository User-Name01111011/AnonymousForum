import{h as t,n as e,j as s,o as a,c as i,w as r,a as n,d as o,t as u,m as l,u as d,k as h,l as c,F as p,i as g,r as m}from"./index.ca9f02a4.js";import{_ as f}from"./buildingItem.ed036339.js";import{r as y}from"./uni-app.es.7a519bdb.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";import"./info.9324eb84.js";var _=R({data:()=>({userInfo:{uid:"未登录",state:"未知",praise_sum:0},current:0,userRelation:{essay:[],collection:[],praise:[],reply:[]},pageCount:{essay:1,collection:1}}),methods:{tabClick(t){this.current=t},signin(){e({url:"../signin/signin"})},getEssayData(){var e,s;(e=this.$store.getters.getUid,s=Math.ceil(this.userRelation.essay.length/10),t({url:"/AnonymousForum/GET/UserRelation.php",data:'{"uid": '+e+', "page": '+s+',"type":"essay"}',method:"POST"})).then((t=>{this.userRelation.essay.push(...t.data.userData),this.userRelation.essay.pop()}))},getCollectionData(){var e,s;(e=this.$store.getters.getUid,s=Math.ceil(this.userRelation.collection.length/10),t({url:"/AnonymousForum/GET/UserRelation.php",data:'{"uid": '+e+', "page": '+s+',"type":"collection"}',method:"POST"})).then((t=>{this.userRelation.collection.push(...t.data.userData),this.userRelation.collection.pop()}))},getReplyData(){var e,s;(e=this.$store.getters.getUid,s=Math.ceil(this.userRelation.reply.length/10),t({url:"/AnonymousForum/GET/UserRelation.php",data:'{"uid": '+e+', "page": '+s+',"type":"reply"}',method:"POST"})).then((t=>{this.userRelation.reply.push(...t.data.userData),this.userRelation.reply.pop()}))},getPraiseData(){var e;(e=this.$store.getters.getUid,t({url:"/AnonymousForum/GET/UserRelation.php",data:'{"uid": '+e+', "page": 0,"type":"praise"}',method:"POST"})).then((t=>{this.userRelation.praise.push(...t.data.userData),this.userRelation.praise.pop()}))}},computed:{uid(){return this.userInfo.uid=this.$store.getters.getUid,-1==this.$store.getters.getUid},buildingData(){switch(this.current){case 0:return this.userRelation.essay;case 1:return this.userRelation.collection;case 2:return this.userRelation.praise;case 3:return[]}}},onLoad(){s("loadData",(()=>{var e;(e=this.$store.getters.getUid,t({url:"/AnonymousForum/GET/UserInfo.php",method:"POST",data:'{"id":'+e+"}"})).then((t=>{this.userInfo.state=t.data.userInfo.state,this.userInfo.praise_sum=t.data.userInfo.praise_sum})),function(e){return t({url:"/AnonymousForum/GET/UserRelationPage.php",method:"POST",data:'{"uid":'+e+"}"})}(this.$store.getters.getUid).then((t=>{this.pageCount=t.data})),this.getEssayData(),this.getCollectionData(),this.getPraiseData()}))},onReachBottom(){"未登录"!=this.$store.getters.getUid&&(0==this.current?this.pageCount.essay>Math.ceil(this.userRelation.essay.length/10)&&this.getEssayData():1==this.current&&this.pageCount.collection>Math.ceil(this.userRelation.collection.length/10)&&this.getCollectionData())}},[["render",function(t,e,s,R,_,b){const C=g,D=y(m("buildingItem"),f);return a(),i(C,null,{default:r((()=>[n(C,{id:"user-info"},{default:r((()=>[n(C,{id:"uidparent"},{default:r((()=>[n(C,{id:"uid"},{default:r((()=>[o("uid:"+u(_.userInfo.uid),1)])),_:1}),b.uid?(a(),i(C,{key:0,id:"signin",onClick:e[0]||(e[0]=t=>b.signin())},{default:r((()=>[o("注册/登录")])),_:1})):l("",!0)])),_:1}),n(C,null,{default:r((()=>[o("状态:"+u(_.userInfo.state),1)])),_:1}),n(C,{id:"other-info"},{default:r((()=>[n(C,{class:"other-info-item"},{default:r((()=>[o("获赞:"+u(_.userInfo.praise_sum),1)])),_:1}),n(C,null,{default:r((()=>[o("|")])),_:1}),n(C,{class:"other-info-item"},{default:r((()=>[o("敬请期待")])),_:1})])),_:1})])),_:1}),n(C,{id:"tabBar"},{default:r((()=>[n(C,{class:d(["tab",{"tab-current":0===_.current}]),onClick:e[1]||(e[1]=t=>b.tabClick(0))},{default:r((()=>[o("发帖")])),_:1},8,["class"]),n(C,{class:d(["tab",{"tab-current":1===_.current}]),onClick:e[2]||(e[2]=t=>b.tabClick(1))},{default:r((()=>[o("收藏")])),_:1},8,["class"]),n(C,{class:d(["tab",{"tab-current":2===_.current}]),onClick:e[3]||(e[3]=t=>b.tabClick(2))},{default:r((()=>[o("最近点赞")])),_:1},8,["class"]),n(C,{class:d(["tab",{"tab-current":3===_.current}]),onClick:e[4]||(e[4]=t=>b.tabClick(3))},{default:r((()=>[o("回复")])),_:1},8,["class"])])),_:1}),(a(!0),h(p,null,c(b.buildingData,(t=>(a(),i(D,{building:t,key:t},null,8,["building"])))),128))])),_:1})}],["__scopeId","data-v-861993da"]]);export{_ as default};
